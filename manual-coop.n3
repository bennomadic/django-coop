@prefix map: <file:/Users/dom/django/base/d2r-update-server/../coop.n3#> .
@prefix db: <> .
@prefix vocab: <http://localhost/test/vocab/resource/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix d2rq: <http://www.wiwiss.fu-berlin.de/suhl/bizer/D2RQ/0.1#> .
@prefix jdbc: <http://d2rq.org/terms/jdbc/> .
@prefix d2r: <http://sites.wiwiss.fu-berlin.de/suhl/bizer/d2r-server/config.rdf> .

#ajoutés
@prefix insee: <http://xml.insee.fr/schema> .
@prefix foaf: <http://xmlns.com/foaf/0.1/> .
@prefix org:  <http://www.w3.org/ns/org#> .
@prefix dct:  <http://purl.org/dc/terms/> .
@prefix skos: <http://www.w3.org/2004/02/skos/core#> .
@prefix skosxl: <http://www.w3.org/2008/05/skos-xl#> .
@prefix gr:    <http://purl.org/goodrelations/v1#> .
@prefix geo: <http://www.w3.org/2003/01/geo/wgs84_pos#> .
@prefix event: <http://purl.org/NET/c4dm/event.owl#> .
@prefix sioc: <http://rdfs.org/sioc/ns#> .
@prefix vcard: <http://www.w3.org/2006/vcard/ns#Name> .
@prefix ctag: <http://commontag.org/ns#> .

#les deux points collés au prefixe
# column AVANT condition

<> a d2r:Server;
    rdfs:label "django-coop RDF mapper";
    d2r:baseURI <http://localhost:2020/>;
    d2r:port 2020;
    d2r:autoReloadMapping true;
    .

map:database a d2rq:Database;
	d2rq:jdbcDriver "org.postgresql.Driver";
	d2rq:jdbcDSN "jdbc:postgresql://localhost:5432/base";
	d2rq:username "dom";
	d2rq:password "q4s5d6";
	.


# Table coop_local_engagement
map:engagement a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "engagement/@@coop_local_engagement.uuid@@";
	d2rq:class org:Membership;
	.
map:engagement__label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:engagement;
	d2rq:property rdfs:label;
	d2rq:pattern "Engagement #@@coop_local_engagement.uuid@@";
	.
map:engagement_created a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:engagement;
	d2rq:property dct:created;
	d2rq:column "coop_local_engagement.created";
	d2rq:datatype xsd:dateTime;
	.
map:engagement_modified a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:engagement;
	d2rq:property dct:modified;
	d2rq:column "coop_local_engagement.modified";
	d2rq:datatype xsd:dateTime;
	.
map:engagement_membre a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:engagement;
	d2rq:property org:member;
	d2rq:refersToClassMap map:membre;
	d2rq:join "coop_local_engagement.membre_id => coop_local_membre.id";
	.
map:engagement_initiative a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:engagement;
	d2rq:property org:organization;
	d2rq:refersToClassMap map:initiative;
	d2rq:join "coop_local_engagement.initiative_id => coop_local_initiative.id";
	.
map:engagement_role a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:engagement;
	d2rq:property org:role;
	d2rq:refersToClassMap map:role;
	d2rq:join "coop_local_engagement.role_id => coop_local_role.id";
	.


# Table coop_local_event
map:event a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "event/@@coop_local_event.uuid@@";
	d2rq:class event:Event;
	.
map:event__label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:event;
	d2rq:property rdfs:label;
	d2rq:pattern "Evenement #@@coop_local_event.uuid@@";
	.
map:event_title a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:event;
	d2rq:property dct:title;
	d2rq:column "coop_local_event.title";
	.
map:event_description a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:event;
	d2rq:property dct:description;
	d2rq:column "coop_local_event.description";
	.
# map:event_datetime a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_datetime;
#   d2rq:propertyDefinitionLabel "coop_local_event datetime";
#   d2rq:column "coop_local_event.datetime";
#   d2rq:datatype xsd:date;
#   .
# map:event_slug a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_slug;
#   d2rq:propertyDefinitionLabel "coop_local_event slug";
#   d2rq:column "coop_local_event.slug";
#   .
# map:event_created a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_created;
#   d2rq:propertyDefinitionLabel "coop_local_event created";
#   d2rq:column "coop_local_event.created";
#   d2rq:datatype xsd:dateTime;
#   .
# map:event_modified a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_modified;
#   d2rq:propertyDefinitionLabel "coop_local_event modified";
#   d2rq:column "coop_local_event.modified";
#   d2rq:datatype xsd:dateTime;
#   .
# map:event_uuid a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_uuid;
#   d2rq:propertyDefinitionLabel "coop_local_event uuid";
#   d2rq:column "coop_local_event.uuid";
#   .
# map:event_member_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_member_id;
#   d2rq:refersToClassMap map:membre;
#   d2rq:join "coop_local_event.member_id => coop_local_membre.id";
#   .
# map:event_calendar_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_calendar_id;
#   d2rq:refersToClassMap map:event;
#   d2rq:alias "coop_local_event AS coop_local_event__alias";
#   d2rq:join "coop_local_event.calendar_id => coop_local_event__alias.id";
#   .
# map:event_org_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event;
#   d2rq:property vocab:event_org_id;
#   d2rq:refersToClassMap map:initiative;
#   d2rq:join "coop_local_event.org_id => coop_local_initiative.id";
#   .

# # Table coop_local_event_sites
# map:event_sites a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "coop_local_event_sites/@@coop_local_event_sites.id@@";
#   d2rq:class vocab:event_sites;
#   d2rq:classDefinitionLabel "coop_local_event_sites";
#   .
# map:event_sites__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event_sites;
#   d2rq:property rdfs:label;
#   d2rq:pattern "coop_local_event_sites #@@coop_local_event_sites.id@@";
#   .
# map:event_sites_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event_sites;
#   d2rq:property vocab:event_sites_id;
#   d2rq:propertyDefinitionLabel "coop_local_event_sites id";
#   d2rq:column "coop_local_event_sites.id";
#   d2rq:datatype xsd:int;
#   .
# map:event_sites_event_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event_sites;
#   d2rq:property vocab:event_sites_event_id;
#   d2rq:refersToClassMap map:event;
#   d2rq:join "coop_local_event_sites.event_id => coop_local_event.id";
#   .
# map:event_sites_site_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:event_sites;
#   d2rq:property vocab:event_sites_site_id;
#   d2rq:refersToClassMap map:site;
#   d2rq:join "coop_local_event_sites.site_id => coop_local_site.id";
#   .
# 
# # Table coop_local_exchange
# map:exchange a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "coop_local_exchange/@@coop_local_exchange.id@@";
#   d2rq:class vocab:exchange;
#   d2rq:classDefinitionLabel "coop_local_exchange";
#   .
# map:exchange__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property rdfs:label;
#   d2rq:pattern "coop_local_exchange #@@coop_local_exchange.id@@";
#   .
# map:exchange_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_id;
#   d2rq:propertyDefinitionLabel "coop_local_exchange id";
#   d2rq:column "coop_local_exchange.id";
#   d2rq:datatype xsd:int;
#   .
# map:exchange_title a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_title;
#   d2rq:propertyDefinitionLabel "coop_local_exchange title";
#   d2rq:column "coop_local_exchange.title";
#   .
# map:exchange_description a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_description;
#   d2rq:propertyDefinitionLabel "coop_local_exchange description";
#   d2rq:column "coop_local_exchange.description";
#   .
# map:exchange_etype a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_etype;
#   d2rq:propertyDefinitionLabel "coop_local_exchange etype";
#   d2rq:column "coop_local_exchange.etype";
#   d2rq:datatype xsd:short;
#   .
# map:exchange_uri a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_uri;
#   d2rq:propertyDefinitionLabel "coop_local_exchange uri";
#   d2rq:column "coop_local_exchange.uri";
#   .
# map:exchange_expiration a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_expiration;
#   d2rq:propertyDefinitionLabel "coop_local_exchange expiration";
#   d2rq:column "coop_local_exchange.expiration";
#   d2rq:datatype xsd:date;
#   .
# map:exchange_slug a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_slug;
#   d2rq:propertyDefinitionLabel "coop_local_exchange slug";
#   d2rq:column "coop_local_exchange.slug";
#   .
# map:exchange_created a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_created;
#   d2rq:propertyDefinitionLabel "coop_local_exchange created";
#   d2rq:column "coop_local_exchange.created";
#   d2rq:datatype xsd:dateTime;
#   .
# map:exchange_modified a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_modified;
#   d2rq:propertyDefinitionLabel "coop_local_exchange modified";
#   d2rq:column "coop_local_exchange.modified";
#   d2rq:datatype xsd:dateTime;
#   .
# map:exchange_org_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_org_id;
#   d2rq:refersToClassMap map:initiative;
#   d2rq:join "coop_local_exchange.org_id => coop_local_initiative.id";
#   .
# map:exchange_member_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:exchange;
#   d2rq:property vocab:exchange_member_id;
#   d2rq:refersToClassMap map:membre;
#   d2rq:join "coop_local_exchange.member_id => coop_local_membre.id";
#   .

# Table coop_local_initiative
map:initiative a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "initiative/@@coop_local_initiative.slug@@";
#	d2rq:condition "coop_local_initiative.presage = 't'"
	d2rq:class org:Organization;
	.
map:initiative__label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property rdfs:label;
	d2rq:pattern "@@coop_local_initiative.title@@";
	.
map:initiative_title a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property dct:title;
	d2rq:column "coop_local_initiative.title";
	.
map:initiative_description a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property dct:description;
	d2rq:column "coop_local_initiative.description";
	.
map:initiative_telephone_fixe a d2rq:PropertyBridge;
  d2rq:belongsToClassMap map:initiative;
  d2rq:property foaf:phone;
  d2rq:column "coop_local_initiative.telephone_fixe";
  d2rq:condition "coop_local_initiative.telephone_fixe <> ''"
  .
map:initiative_email a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property foaf:mbox;
	d2rq:column "coop_local_initiative.email";
	d2rq:condition "coop_local_initiative.email <> ''"
	.
map:initiative_web a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property foaf:homepage;
	d2rq:column "coop_local_initiative.web";
	d2rq:condition "coop_local_initiative.web <> ''"
	.
map:initiative_rss a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property sioc:feed;
	d2rq:column "coop_local_initiative.rss";
	d2rq:condition "coop_local_initiative.rss <> ''"
	.
map:initiative_created a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property dct:created;
	d2rq:column "coop_local_initiative.created";
	d2rq:datatype xsd:dateTime;
	.
map:initiative_modified a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property dct:modified;
	d2rq:propertyDefinitionLabel "coop_local_initiative modified";
	d2rq:column "coop_local_initiative.modified";
	d2rq:datatype xsd:dateTime;
	.
map:initiative_secteur_fse a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property vocab:credis_secteur_fse;
	d2rq:propertyDefinitionLabel "Secteur d'activités selon le FSE";
	d2rq:column "coop_local_initiative.secteur_fse";
	d2rq:datatype xsd:short;
	.
#TODO generation de translation table	
	
map:initiative_siret a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property vocab:credis_siret;
	d2rq:column "coop_local_initiative.siret";
	d2rq:datatype insee:SIRENType;
	.
map:initiative_naf a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property vocab:credis_naf;
	d2rq:column "coop_local_initiative.naf";
	.
	
vocab:StatutJuridique a rdf:Type.
	
map:initiative_statut a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property vocab:StatutJuridique;
	d2rq:column "coop_local_initiative.statut";
	d2rq:translateWith map:Credis_Statuts;
	d2rq:datatype xsd:short;
	.
	
vocab:asso a vocab:StatutJuridique;
    dct:title "Association de loi 1901"@fr.
vocab:scop a vocab:StatutJuridique;  
  dct:title "Société Coopérative Ouvrière de Production"@fr.
vocab:scic a vocab:StatutJuridique; 
    dct:title "Société Coopérative d’Intérêt Collectif"@fr.
vocab:coop47 a vocab:StatutJuridique; 
    dct:title "Société Coopérative de loi 1947"@fr.
	
map:Credis_Statuts a d2rq:TranslationTable;
    d2rq:translation [ d2rq:databaseValue "1"; d2rq:rdfValue vocab:asso; ];
    d2rq:translation [ d2rq:databaseValue "2"; d2rq:rdfValue vocab:scop; ];
    d2rq:translation [ d2rq:databaseValue "3"; d2rq:rdfValue vocab:scic; ];
    d2rq:translation [ d2rq:databaseValue "4"; d2rq:rdfValue vocab:coop47; ]
    .
map:initiative_acronym a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property vocab:credis_sigle;
	d2rq:column "coop_local_initiative.acronym";
	d2rq:condition "coop_local_initiative.acronym <> ''"
	.
map:initiative_presage a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property vocab:credis_presage;
	d2rq:column "coop_local_initiative.presage";
	d2rq:condition "coop_local_initiative.presage <> ''"
	.
map:initiative_sites a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property org:hasSite;
	d2rq:refersToClassMap map:site;
	d2rq:join "coop_local_initiative_sites.initiative_id => coop_local_initiative.id";
	d2rq:join "coop_local_initiative_sites.site_id => coop_local_site.id";
	.

map:initiative_tags a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:initiative;
	d2rq:property ctag:tagged;
	d2rq:refersToClassMap map:term;
	d2rq:join "coop_local_initiative_tags.initiative_id => coop_local_initiative.id";
	d2rq:join "coop_local_initiative_tags.term_id => skosxl_term.id";
	.


# Table coop_local_membre
map:membre a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "coop_local_membre/@@coop_local_membre.id@@";
	d2rq:class org:Member;
	d2rq:classDefinitionLabel "coop_local_membre";
	.
map:membre__label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property rdfs:label;
	d2rq:pattern "@@coop_local_membre.prenom@@ @@coop_local_membre.nom@@";
	.
map:membre_nom a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property foaf:familyName;
	d2rq:column "coop_local_membre.nom";
	.
map:membre_prenom a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property foaf:givenName;
	d2rq:column "coop_local_membre.prenom";
	.
map:membre_adresse a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property foaf:based_near;
	d2rq:column "coop_local_membre.ville";
	.
map:membre_telephone_fixe a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property foaf:phone;
	d2rq:column "coop_local_membre.telephone_fixe";
	.
map:membre_telephone_portable a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property foaf:phone;
	d2rq:column "coop_local_membre.telephone_portable";
	.
map:membre_email a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property foaf:mbox;
	d2rq:column "coop_local_membre.email";
	.
map:membre_created a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property dct:created;
	d2rq:column "coop_local_membre.created";
	d2rq:datatype xsd:dateTime;
	.
map:membre_modified a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:membre;
	d2rq:property dct:modified;
	d2rq:column "coop_local_membre.modified";
	d2rq:datatype xsd:dateTime;
	.
# map:membre_adherent a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:membre;
#   d2rq:property vocab:membre_adherent;
#   d2rq:propertyDefinitionLabel "coop_local_membre adherent";
#   d2rq:column "coop_local_membre.adherent";
#   d2rq:datatype xsd:boolean;
#   .


# Table coop_local_role
map:role a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "role/@@coop_local_role.slug@@";
	d2rq:class org:Role;
	d2rq:classDefinitionLabel "coop_local_role";
	.
map:role_label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:role;
	d2rq:property dct:title;
	d2rq:column "coop_local_role.label";
	.

# Table coop_local_site
map:site a d2rq:ClassMap;
	d2rq:dataStorage map:database;
	d2rq:uriPattern "place/@@coop_local_site.uuid@@";
	d2rq:class org:Site;
	.
map:site__label a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property rdfs:label;
	d2rq:pattern "@@coop_local_site.title@@ @@coop_local_site.city@@";
	.
map:site_title a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property dct:title;
	d2rq:column "coop_local_site.title";
	.
map:site_description a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property dct:description;
	d2rq:column "coop_local_site.description";
	.
# map:site_site_principal a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:site;
#   d2rq:property vocab:site_site_principal;
#   d2rq:propertyDefinitionLabel "coop_local_site site_principal";
#   d2rq:column "coop_local_site.site_principal";
#   d2rq:datatype xsd:boolean;
#   .
# exemple de choix différent selon ce champ : hasSite ou hasPrimarySite

map:site_adr1 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property vcard:Address;
	d2rq:column "coop_local_site.adr1";
	.
map:site_adr2 a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property vcard:Address;
	d2rq:column "coop_local_site.adr2";
	.
map:site_zipcode a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property vcard:postal-code;
	d2rq:column "coop_local_site.zipcode";
	.
map:site_city a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property vcard:locality;
	d2rq:column "coop_local_site.city";
	.
map:site_latlong a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property geo:latlong;
	d2rq:column "coop_local_site.latlong";
	.
map:site_created a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property dct:created;
	d2rq:column "coop_local_site.created";
	d2rq:datatype xsd:dateTime;
	.
map:site_modified a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property dct:modified;
	d2rq:column "coop_local_site.modified";
	d2rq:datatype xsd:dateTime;
	.
map:site_lat a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property vcard:latitude;
	d2rq:column "coop_local_site.lat";
	.
map:site_long a d2rq:PropertyBridge;
	d2rq:belongsToClassMap map:site;
	d2rq:property vcard:longitude;
	d2rq:column "coop_local_site.long";
	.
# 
# # Table coop_local_transaction
# map:transaction a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "coop_local_transaction/@@coop_local_transaction.id@@";
#   d2rq:class vocab:transaction;
#   d2rq:classDefinitionLabel "coop_local_transaction";
#   .
# map:transaction__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property rdfs:label;
#   d2rq:pattern "coop_local_transaction #@@coop_local_transaction.id@@";
#   .
# map:transaction_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_id;
#   d2rq:propertyDefinitionLabel "coop_local_transaction id";
#   d2rq:column "coop_local_transaction.id";
#   d2rq:datatype xsd:int;
#   .
# map:transaction_title a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_title;
#   d2rq:propertyDefinitionLabel "coop_local_transaction title";
#   d2rq:column "coop_local_transaction.title";
#   .
# map:transaction_description a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_description;
#   d2rq:propertyDefinitionLabel "coop_local_transaction description";
#   d2rq:column "coop_local_transaction.description";
#   .
# map:transaction_created a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_created;
#   d2rq:propertyDefinitionLabel "coop_local_transaction created";
#   d2rq:column "coop_local_transaction.created";
#   d2rq:datatype xsd:dateTime;
#   .
# map:transaction_modified a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_modified;
#   d2rq:propertyDefinitionLabel "coop_local_transaction modified";
#   d2rq:column "coop_local_transaction.modified";
#   d2rq:datatype xsd:dateTime;
#   .
# map:transaction_uuid a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_uuid;
#   d2rq:propertyDefinitionLabel "coop_local_transaction uuid";
#   d2rq:column "coop_local_transaction.uuid";
#   .
# map:transaction_origin_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_origin_id;
#   d2rq:refersToClassMap map:exchange;
#   d2rq:join "coop_local_transaction.origin_id => coop_local_exchange.id";
#   .
# map:transaction_destination_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:transaction;
#   d2rq:property vocab:transaction_destination_id;
#   d2rq:refersToClassMap map:exchange;
#   d2rq:join "coop_local_transaction.destination_id => coop_local_exchange.id";
#   .
# 
# # Table skosxl_concept
# map:concept a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "skosxl_concept/@@skosxl_concept.id@@";
#   d2rq:class vocab:concept;
#   d2rq:classDefinitionLabel "skosxl_concept";
#   .
# map:concept__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:concept;
#   d2rq:property rdfs:label;
#   d2rq:pattern "skosxl_concept #@@skosxl_concept.id@@";
#   .
# map:concept_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:concept;
#   d2rq:property vocab:concept_id;
#   d2rq:propertyDefinitionLabel "skosxl_concept id";
#   d2rq:column "skosxl_concept.id";
#   d2rq:datatype xsd:int;
#   .
# map:concept_definition a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:concept;
#   d2rq:property vocab:concept_definition;
#   d2rq:propertyDefinitionLabel "skosxl_concept definition";
#   d2rq:column "skosxl_concept.definition";
#   .
# map:concept_changenote a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:concept;
#   d2rq:property vocab:concept_changenote;
#   d2rq:propertyDefinitionLabel "skosxl_concept changenote";
#   d2rq:column "skosxl_concept.changenote";
#   .
# map:concept_created a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:concept;
#   d2rq:property vocab:concept_created;
#   d2rq:propertyDefinitionLabel "skosxl_concept created";
#   d2rq:column "skosxl_concept.created";
#   d2rq:datatype xsd:dateTime;
#   .
# map:concept_modified a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:concept;
#   d2rq:property vocab:concept_modified;
#   d2rq:propertyDefinitionLabel "skosxl_concept modified";
#   d2rq:column "skosxl_concept.modified";
#   d2rq:datatype xsd:dateTime;
#   .
# map:concept_author a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:concept;
#   d2rq:property vocab:concept_author;
#   d2rq:propertyDefinitionLabel "skosxl_concept author";
#   d2rq:column "skosxl_concept.author";
#   .
# 
# # Table skosxl_label
# map:label a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "skosxl_label/@@skosxl_label.id@@";
#   d2rq:class vocab:label;
#   d2rq:classDefinitionLabel "skosxl_label";
#   .
# map:label__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:label;
#   d2rq:property rdfs:label;
#   d2rq:pattern "skosxl_label #@@skosxl_label.id@@";
#   .
# map:label_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:label;
#   d2rq:property vocab:label_id;
#   d2rq:propertyDefinitionLabel "skosxl_label id";
#   d2rq:column "skosxl_label.id";
#   d2rq:datatype xsd:int;
#   .
# map:label_type a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:label;
#   d2rq:property vocab:label_type;
#   d2rq:propertyDefinitionLabel "skosxl_label type";
#   d2rq:column "skosxl_label.type";
#   d2rq:datatype xsd:short;
#   .
# map:label_term_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:label;
#   d2rq:property vocab:label_term_id;
#   d2rq:refersToClassMap map:term;
#   d2rq:join "skosxl_label.term_id => skosxl_term.id";
#   .
# map:label_concept_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:label;
#   d2rq:property vocab:label_concept_id;
#   d2rq:refersToClassMap map:concept;
#   d2rq:join "skosxl_label.concept_id => skosxl_concept.id";
#   .
# 
# # Table skosxl_semrelation
# map:semrelation a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "skosxl_semrelation/@@skosxl_semrelation.id@@";
#   d2rq:class vocab:semrelation;
#   d2rq:classDefinitionLabel "skosxl_semrelation";
#   .
# map:semrelation__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:semrelation;
#   d2rq:property rdfs:label;
#   d2rq:pattern "skosxl_semrelation #@@skosxl_semrelation.id@@";
#   .
# map:semrelation_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:semrelation;
#   d2rq:property vocab:semrelation_id;
#   d2rq:propertyDefinitionLabel "skosxl_semrelation id";
#   d2rq:column "skosxl_semrelation.id";
#   d2rq:datatype xsd:int;
#   .
# map:semrelation_type a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:semrelation;
#   d2rq:property vocab:semrelation_type;
#   d2rq:propertyDefinitionLabel "skosxl_semrelation type";
#   d2rq:column "skosxl_semrelation.type";
#   d2rq:datatype xsd:short;
#   .
# map:semrelation_target_concept_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:semrelation;
#   d2rq:property vocab:semrelation_target_concept_id;
#   d2rq:refersToClassMap map:concept;
#   d2rq:join "skosxl_semrelation.target_concept_id => skosxl_concept.id";
#   .
# map:semrelation_origin_concept_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:semrelation;
#   d2rq:property vocab:semrelation_origin_concept_id;
#   d2rq:refersToClassMap map:concept;
#   d2rq:join "skosxl_semrelation.origin_concept_id => skosxl_concept.id";
#   .
# 
# # Table skosxl_similarconcept
# map:similarconcept a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "skosxl_similarconcept/@@skosxl_similarconcept.id@@";
#   d2rq:class vocab:similarconcept;
#   d2rq:classDefinitionLabel "skosxl_similarconcept";
#   .
# map:similarconcept__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:similarconcept;
#   d2rq:property rdfs:label;
#   d2rq:pattern "skosxl_similarconcept #@@skosxl_similarconcept.id@@";
#   .
# map:similarconcept_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:similarconcept;
#   d2rq:property vocab:similarconcept_id;
#   d2rq:propertyDefinitionLabel "skosxl_similarconcept id";
#   d2rq:column "skosxl_similarconcept.id";
#   d2rq:datatype xsd:int;
#   .
# map:similarconcept_Preflabel a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:similarconcept;
#   d2rq:property vocab:similarconcept_Preflabel;
#   d2rq:propertyDefinitionLabel "skosxl_similarconcept Preflabel";
#   d2rq:column "skosxl_similarconcept.Preflabel";
#   .
# map:similarconcept_uri a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:similarconcept;
#   d2rq:property vocab:similarconcept_uri;
#   d2rq:propertyDefinitionLabel "skosxl_similarconcept uri";
#   d2rq:column "skosxl_similarconcept.uri";
#   .
# map:similarconcept_match_type a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:similarconcept;
#   d2rq:property vocab:similarconcept_match_type;
#   d2rq:propertyDefinitionLabel "skosxl_similarconcept match_type";
#   d2rq:column "skosxl_similarconcept.match_type";
#   d2rq:datatype xsd:short;
#   .
# map:similarconcept_voc_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:similarconcept;
#   d2rq:property vocab:similarconcept_voc_id;
#   d2rq:refersToClassMap map:vocabulary;
#   d2rq:join "skosxl_similarconcept.voc_id => skosxl_vocabulary.id";
#   .
# map:similarconcept_similar_to_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:similarconcept;
#   d2rq:property vocab:similarconcept_similar_to_id;
#   d2rq:refersToClassMap map:concept;
#   d2rq:join "skosxl_similarconcept.similar_to_id => skosxl_concept.id";
#   .
# 
# Table skosxl_term
map:term a d2rq:ClassMap;
  d2rq:dataStorage map:database;
  d2rq:uriPattern "tag/@@skosxl_term.slug@@";
  d2rq:class ctag:Tag;
  .
map:term__label a d2rq:PropertyBridge;
  d2rq:belongsToClassMap map:term;
  d2rq:property rdfs:label;
  d2rq:pattern "@@skosxl_term.literal@@";
  .
map:term_literal a d2rq:PropertyBridge;
  d2rq:belongsToClassMap map:term;
  d2rq:property rdfs:label;
  d2rq:column "skosxl_term.literal";
  .
# map:term_language a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:term;
#   d2rq:property vocab:term_language;
#   d2rq:column "skosxl_term.language";
#   .
#FIXME : comment on definit les langues des labels ?
map:term_created a d2rq:PropertyBridge;
  d2rq:belongsToClassMap map:term;
  d2rq:property dct:created;
  d2rq:column "skosxl_term.created";
  d2rq:datatype xsd:dateTime;
  .
map:term_modified a d2rq:PropertyBridge;
  d2rq:belongsToClassMap map:term;
  d2rq:property dct:modified;
  d2rq:column "skosxl_term.modified";
  d2rq:datatype xsd:dateTime;
  .
map:term_author a d2rq:PropertyBridge;
  d2rq:belongsToClassMap map:term;
  d2rq:property foaf:made;
  d2rq:column "skosxl_term.author";
  .
# 
# # Table skosxl_vocabulary
# map:vocabulary a d2rq:ClassMap;
#   d2rq:dataStorage map:database;
#   d2rq:uriPattern "skosxl_vocabulary/@@skosxl_vocabulary.id@@";
#   d2rq:class vocab:vocabulary;
#   d2rq:classDefinitionLabel "skosxl_vocabulary";
#   .
# map:vocabulary__label a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:vocabulary;
#   d2rq:property rdfs:label;
#   d2rq:pattern "skosxl_vocabulary #@@skosxl_vocabulary.id@@";
#   .
# map:vocabulary_id a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:vocabulary;
#   d2rq:property vocab:vocabulary_id;
#   d2rq:propertyDefinitionLabel "skosxl_vocabulary id";
#   d2rq:column "skosxl_vocabulary.id";
#   d2rq:datatype xsd:int;
#   .
# map:vocabulary_name a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:vocabulary;
#   d2rq:property vocab:vocabulary_name;
#   d2rq:propertyDefinitionLabel "skosxl_vocabulary name";
#   d2rq:column "skosxl_vocabulary.name";
#   .
# map:vocabulary_info_url a d2rq:PropertyBridge;
#   d2rq:belongsToClassMap map:vocabulary;
#   d2rq:property vocab:vocabulary_info_url;
#   d2rq:propertyDefinitionLabel "skosxl_vocabulary info_url";
#   d2rq:column "skosxl_vocabulary.info_url";
#   .
# 
